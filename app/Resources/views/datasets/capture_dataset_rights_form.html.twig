{% extends 'default_bootstrap_admin.html.twig' %}

{% block stylesheets %}
  {{ parent() }}
  <link href="//cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/css/bootstrap-datepicker3.css" rel="stylesheet" type="text/css">
{% endblock %}

{% block content %}

  <div class="row">
    <div class="col-sm-12 col-md-12">
      <div class="alert alert-warning" role="alert">
        TODO: Fix the back button - hardwire to go to the parent Capture Dataset - e.g. /admin/projects/dataset_elements/19/49/21/27
      </div>
      <div class="form-group">
        <a href="{{ app.request.headers.get('referer')|default('/admin/workspace/') }}" class="btn btn-default" role="button"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span> Back</a>
      </div>
    </div>
  </div>

  {{ form_start(form) }} {# , {'attr': {'novalidate': 'novalidate'}} #}

    <div class="row">
      <div class="col-sm-6 col-md-6">
        {{ form_row(form.data_rights_restriction) }}
        {{ form_row(form.start_date) }}
        {{ form_row(form.end_date) }}
      </div>
      <div class="col-sm-6 col-md-6">
        <!-- placeholder -->
      </div>
    </div>

    <div class="field-group" style="clear:both;">
      {{ form_row(form.save) }}
    </div>

  {{ form_end(form) }}

{% endblock %}

{% block javascripts %}
  {{ parent() }}
  <script src="//cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/js/bootstrap-datepicker.min.js"></script>
  <script type="text/javascript">
    // Datepicker
    $(document).ready(function(){
      var start_date_input = $('input[name="capture_dataset_rights_form[start_date]"]');
      var end_date_input = $('input[name="capture_dataset_rights_form[end_date]"]');
      var container = $('form.capture_dataset_rights_form').length > 0 ? $('form.capture_dataset_rights_form').parent() : 'body';
      var options = {
        format: 'yyyy-mm-dd 00:00:00',
        container: container,
        todayHighlight: true,
        autoclose: true,
      };
      start_date_input.datepicker(options);
      end_date_input.datepicker(options);
    });
  </script>
{% endblock %}